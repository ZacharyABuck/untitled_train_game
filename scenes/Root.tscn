[gd_scene load_steps=25 format=3 uid="uid://xmq032mdyq7a"]

[ext_resource type="Script" path="res://scripts/root.gd" id="1_ghyap"]
[ext_resource type="Texture2D" uid="uid://c75pwpkt2lydf" path="res://sprites/tiles/world_map_tileset.png" id="2_htwhw"]
[ext_resource type="Script" path="res://scripts/maps/world_map.gd" id="3_keudd"]
[ext_resource type="Script" path="res://scripts/ui/towns_ui.gd" id="4_22x6k"]
[ext_resource type="Texture2D" uid="uid://so1nk7bc5pxv" path="res://sprites/obstacles/shop_shack.png" id="4_84fok"]
[ext_resource type="Texture2D" uid="uid://ccydwnn5siydn" path="res://sprites/ui/x.png" id="4_afhpt"]
[ext_resource type="Script" path="res://scripts/ui/world_ui.gd" id="4_c0u45"]
[ext_resource type="Texture2D" uid="uid://3pmjvwnuc8ea" path="res://sprites/ui/edge_background.png" id="4_jq128"]
[ext_resource type="Shader" path="res://shaders/line.gdshader" id="4_mce1l"]
[ext_resource type="Texture2D" uid="uid://c0ctx778y5g3i" path="res://sprites/ui/track_single.png" id="5_7ts3a"]
[ext_resource type="FontFile" uid="uid://bt4836ueqhi58" path="res://fonts/WesternBangBang-Regular.ttf" id="5_l3sa1"]
[ext_resource type="FontFile" uid="uid://dxx340jybsylj" path="res://fonts/JMH Typewriter-Black.ttf" id="5_v4riv"]
[ext_resource type="FontFile" uid="uid://tpmg7wha0yio" path="res://fonts/JMH Typewriter-Bold.ttf" id="8_ljput"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_w5n7g"]
vertices = PackedVector2Array(32, 11, -32, 10, -32, -11, 32, -12)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-32, -11, 32, -11.5, 32, 11, -32, 9.5)])
source_geometry_group_name = &"navigation_polygon_source_group"
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_bi16b"]
vertices = PackedVector2Array(-32, 9, -32, -4, -12, -2, -21, 10, -3, 20, 6, 7, 24, 10, 20, -5, 32, -6, 32, 9)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 3, 2, 5), PackedInt32Array(6, 4, 5, 7, 8), PackedInt32Array(8, 9, 6)])
outlines = Array[PackedVector2Array]([PackedVector2Array(32, -5.5, 19.5, -4.5, 5.5, 6.5, -12, -1.5, -32, -3.5, -32, 8.5, -20.5, 10, -2.5, 19.5, 23.5, 9.5, 32, 9)])
source_geometry_group_name = &"navigation_polygon_source_group"
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_aaq0t"]
vertices = PackedVector2Array(-9, 5, -32, 8, -32, -5, -7, -11, 7, -5, -9, -32, 4, -32, 5, -21, 32, -5, 32, 9, 6, 9, -9, 32, 6, 32)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(3, 5, 6, 7), PackedInt32Array(3, 7, 4), PackedInt32Array(4, 8, 9, 10, 0), PackedInt32Array(11, 0, 10, 12)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-9, -32, -6.5, -10.5, -32, -4.5, -32, 8, -8.5, 4.5, -9, 32, 5.5, 32, 5.5, 9, 32, 9, 32, -5, 7, -5, 4.5, -20.5, 3.5, -32)])
source_geometry_group_name = &"navigation_polygon_source_group"
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ghwbf"]
vertices = PackedVector2Array(5, 4, 8, 32, -8, 32, -11, 9, -4, -9, -32, -9, -32, 7)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(5, 4, 3, 6)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-32, -9, -4, -9, 5, 4, 7.5, 32, -8, 32, -10.5, 8.5, -32, 6.5)])
source_geometry_group_name = &"navigation_polygon_source_group"
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_3saok"]
vertices = PackedVector2Array(-5, -18, -7, -32, 6, -32, 6, -24, 4, -7, 18, -12, 15, 4, 2, 14, -6, 1, -18, 13, -22, -5, -32, 8, -32, -5)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(4, 3, 5, 6, 7), PackedInt32Array(8, 4, 7, 9), PackedInt32Array(10, 8, 9, 11, 12)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-7, -32, -5, -18, 3.5, -7, -6, 1, -21.5, -4.5, -32, -5, -32, 8, -18, 13, 2, 13.5, 14.5, 3.5, 17.5, -12, 6, -24, 6, -32)])
source_geometry_group_name = &"navigation_polygon_source_group"
agent_radius = 0.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_pbwlm"]
vertices = PackedVector2Array(-5, -10, -10, -32, 5, -32, 8, -5, -9, 5, -32, 9, -32, -5, 32, 9, 32, -4)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 0), PackedInt32Array(7, 4, 0, 3), PackedInt32Array(7, 3, 8)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-10, -32, -5, -9.5, -32, -4.5, -32, 9, -9, 4.5, 32, 8.5, 32, -4, 8, -4.5, 4.5, -32)])
source_geometry_group_name = &"navigation_polygon_source_group"
agent_radius = 0.0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_jo74o"]
texture = ExtResource("2_htwhw")
texture_region_size = Vector2i(64, 64)
0:1/0 = 0
0:1/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_w5n7g")
0:1/0/metadata/_better_terrain = {
0: [2],
8: [2],
"symmetry": 7,
"type": 2
}
1:1/0 = 0
1:1/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_ghwbf")
1:1/0/metadata/_better_terrain = {
4: [2],
8: [2],
"symmetry": 7,
"type": 2
}
2:2/0 = 0
2:2/0/metadata/_better_terrain = {
"type": 1
}
1:2/0 = 0
1:2/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_3saok")
1:2/0/metadata/_better_terrain = {
8: [2],
12: [2],
"symmetry": 7,
"type": 2
}
0:2/0 = 0
0:2/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_bi16b")
0:2/0/metadata/_better_terrain = {
0: [2],
8: [2],
"symmetry": 7,
"type": 2
}
0:0/0 = 0
0:0/0/metadata/_better_terrain = {
"type": 0
}
2:1/0 = 0
2:1/0/probability = 0.05
2:1/0/metadata/_better_terrain = {
"type": 0
}
3:1/0 = 0
3:1/0/probability = 0.05
3:1/0/metadata/_better_terrain = {
"type": 0
}
4:1/0 = 0
4:1/0/probability = 0.05
4:1/0/metadata/_better_terrain = {
"type": 0
}
5:1/0 = 0
5:1/0/probability = 0.02
5:1/0/metadata/_better_terrain = {
"type": 0
}
6:1/0 = 0
6:1/0/probability = 0.02
6:1/0/metadata/_better_terrain = {
"type": 0
}
3:2/0 = 0
3:2/0/probability = 0.2
3:2/0/metadata/_better_terrain = {
"type": 1
}
4:2/0 = 0
4:2/0/probability = 0.2
4:2/0/metadata/_better_terrain = {
"type": 1
}
5:2/0 = 0
5:2/0/probability = 0.2
5:2/0/metadata/_better_terrain = {
"type": 1
}
0:3/0 = 0
0:3/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_aaq0t")
0:3/0/metadata/_better_terrain = {
0: [2],
4: [2],
8: [2],
12: [2],
"symmetry": 7,
"type": 2
}
1:3/0 = 0
1:3/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_pbwlm")
1:3/0/metadata/_better_terrain = {
0: [2],
8: [2],
12: [2],
"symmetry": 7,
"type": 2
}
2:3/0 = 0
2:3/0/metadata/_better_terrain = {
"type": 3
}

[sub_resource type="TileSet" id="TileSet_efl2w"]
tile_size = Vector2i(64, 64)
navigation_layer_0/layers = 1
sources/0 = SubResource("TileSetAtlasSource_jo74o")
metadata/_better_terrain = {
"decoration": ["Decoration", Color(0.411765, 0.411765, 0.411765, 1), 3, [], {
"path": "res://addons/better-terrain/icons/Decoration.svg"
}],
"terrains": [["Dirt", Color(0.11987, 0.986998, 0.545363, 1), 0, [], {
"path": ""
}], ["Mountains", Color(0.141479, 0.363414, 0.953125, 1), 0, [], {
"path": ""
}], ["Road", Color(0.35759, 0.681827, 0.703518, 1), 0, [], {
"path": ""
}], ["Town", Color(0.761643, 0.454397, 0.565979, 1), 0, [], {
"path": ""
}]],
"version": "0.2"
}

[sub_resource type="ShaderMaterial" id="ShaderMaterial_gqsc8"]
shader = ExtResource("4_mce1l")
shader_parameter/amplitutde = Vector2(1, 0)
shader_parameter/speed = Vector2(0, 0)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_yq70y"]
bg_color = Color(0.156863, 0.678431, 0.701961, 0.415686)
corner_radius_top_left = 50
corner_radius_top_right = 50
corner_radius_bottom_right = 50
corner_radius_bottom_left = 50

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_l0b07"]
bg_color = Color(0.661626, 0.510803, 0.386648, 1)

[node name="Root" type="Node2D"]
process_mode = 3
script = ExtResource("1_ghyap")

[node name="Camera" type="Camera2D" parent="."]
anchor_mode = 0
zoom = Vector2(0.8, 0.8)

[node name="WorldMap" type="TileMap" parent="."]
tile_set = SubResource("TileSet_efl2w")
format = 2
layer_1/name = "Towns"
layer_1/tile_data = PackedInt32Array()
script = ExtResource("3_keudd")

[node name="RouteLine" type="Line2D" parent="WorldMap"]
texture_filter = 1
texture_repeat = 2
material = SubResource("ShaderMaterial_gqsc8")
texture = ExtResource("5_7ts3a")
texture_mode = 1
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="WorldUI" type="CanvasLayer" parent="."]
process_mode = 3
script = ExtResource("4_c0u45")

[node name="MarginContainer" type="MarginContainer" parent="WorldUI"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/margin_left = 50
theme_override_constants/margin_top = 50
theme_override_constants/margin_right = 50
theme_override_constants/margin_bottom = 950

[node name="GridContainer" type="GridContainer" parent="WorldUI/MarginContainer"]
layout_mode = 2

[node name="HBoxContainer" type="HBoxContainer" parent="WorldUI/MarginContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="MoneyLabel" type="RichTextLabel" parent="WorldUI/MarginContainer/GridContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
mouse_filter = 2
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0.926498, 0.980853, 1.54018e-06, 1)
theme_override_constants/outline_size = 5
theme_override_fonts/normal_font = ExtResource("5_v4riv")
theme_override_font_sizes/normal_font_size = 30
text = "Money = $0"

[node name="PanelContainer" type="PanelContainer" parent="WorldUI/MarginContainer/GridContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_styles/panel = SubResource("StyleBoxFlat_yq70y")

[node name="MissionInventoryContainer" type="GridContainer" parent="WorldUI/MarginContainer/GridContainer/HBoxContainer/PanelContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
columns = 4

[node name="HSeparator" type="HSeparator" parent="WorldUI/MarginContainer/GridContainer/HBoxContainer"]
modulate = Color(1, 1, 1, 0)
layout_mode = 2
size_flags_horizontal = 3

[node name="MarginContainer2" type="MarginContainer" parent="WorldUI"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 50
theme_override_constants/margin_top = 400
theme_override_constants/margin_right = 50
theme_override_constants/margin_bottom = 50

[node name="RewardsContainer" type="VBoxContainer" parent="WorldUI/MarginContainer2"]
layout_mode = 2

[node name="TownsUI" type="CanvasLayer" parent="."]
visible = false
script = ExtResource("4_22x6k")

[node name="MarginContainer" type="MarginContainer" parent="TownsUI"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 400
theme_override_constants/margin_top = 200
theme_override_constants/margin_right = 400
theme_override_constants/margin_bottom = 200

[node name="BG" type="Panel" parent="TownsUI/MarginContainer"]
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_l0b07")

[node name="CloseButton" type="TextureButton" parent="TownsUI/MarginContainer/BG"]
layout_direction = 3
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
texture_normal = ExtResource("4_afhpt")
stretch_mode = 3

[node name="MarginContainer" type="MarginContainer" parent="TownsUI/MarginContainer"]
layout_mode = 2
mouse_filter = 2
theme_override_constants/margin_left = 50
theme_override_constants/margin_top = 50
theme_override_constants/margin_right = 50
theme_override_constants/margin_bottom = 50

[node name="HBoxContainer" type="HBoxContainer" parent="TownsUI/MarginContainer/MarginContainer"]
layout_mode = 2

[node name="TownDetails" type="VBoxContainer" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="TownNameLabel" type="RichTextLabel" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer/TownDetails"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 0
theme_override_font_sizes/normal_font_size = 50
bbcode_enabled = true
text = "[center]Townsville[/center]"
fit_content = true
scroll_active = false

[node name="TownDescription" type="RichTextLabel" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer/TownDetails"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_font_sizes/normal_font_size = 20
bbcode_enabled = true
text = "A bunch of lore A bunch of lore A bunch of lore A bunch of lore A bunch of lore A bunch of lore A bunch of lore A bunch of lore A bunch of lore A bunch of lore A bunch of lore A bunch of lore A bunch of lore "
fit_content = true
scroll_active = false

[node name="TownImage" type="TextureRect" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer/TownDetails"]
layout_mode = 2
texture = ExtResource("4_84fok")
stretch_mode = 3

[node name="TravelButton" type="Button" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer/TownDetails"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
text = "Travel to Town"

[node name="MissionDetails" type="TextureRect" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer"]
layout_mode = 2
texture = ExtResource("4_jq128")
expand_mode = 3

[node name="MarginContainer" type="MarginContainer" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer/MissionDetails"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 50
theme_override_constants/margin_top = 50
theme_override_constants/margin_right = 50
theme_override_constants/margin_bottom = 50

[node name="MissionsContainer" type="VBoxContainer" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer/MissionDetails/MarginContainer"]
layout_mode = 2

[node name="MissionsLabel" type="RichTextLabel" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer/MissionDetails/MarginContainer/MissionsContainer"]
layout_mode = 2
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_fonts/normal_font = ExtResource("5_l3sa1")
theme_override_font_sizes/normal_font_size = 50
bbcode_enabled = true
text = "[center]Missions[/center]"
fit_content = true
scroll_active = false

[node name="NoMissionsLabel" type="RichTextLabel" parent="TownsUI/MarginContainer/MarginContainer/HBoxContainer/MissionDetails/MarginContainer"]
custom_minimum_size = Vector2(0, 100)
layout_mode = 2
size_flags_vertical = 4
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_fonts/normal_font = ExtResource("8_ljput")
bbcode_enabled = true
text = "[center]Visit town to see missions![/center]"

[connection signal="pressed" from="TownsUI/MarginContainer/BG/CloseButton" to="TownsUI" method="_on_close_button_pressed"]
[connection signal="pressed" from="TownsUI/MarginContainer/MarginContainer/HBoxContainer/TownDetails/TravelButton" to="." method="_on_travel_button_pressed"]
